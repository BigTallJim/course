# Solution - Thermostat: APIs

[Back to the Challenge](../8_apis.md)

Let's start by experimenting in the console. For this example, we're going to use the OpenWeatherMap API - if you've used another API, the principles are the same.

You'll need to register for an API key - follow the instructions on the page to obtain one.

According to the documentation, we need to make a call to `http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=YOURAPIKEY` to get the weather for London. Let's see what that returns in the console, using a basic `$.get` request:

```javascript
$.get('http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=a3d9eb01d4de82b9b8d0849ef604dbed', function(data) {
  console.log(data);
})
```

If you've read the jQuery docs, you'll see that `$.get()` is shorthand for `$.ajax()`, which in turn is a wrapper around JavaScript's inbuilt `XMLHttp` library. It's unlikely you'll need to write the latter two by hand, but it's good to be aware of what's actually going on under the hood.

Click around the object, and find the temperature - it should be under `main`. However, the temperature seems to be above 270, which doesn't seem right. On further inspection of the API documentation, you can pass an additional parameter to the request to make sure our request returns a metric unit, in this case Celcius:

```javascript
$.get('http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=a3d9eb01d4de82b9b8d0849ef604dbed&units=metric', function(data) {
  console.log(data.main.temp);
})
```

Now that you have the information that you need, you can put it on the page. Add some HTML to hold the result:

```html
<section>
  <h1>Current temperature: <span id="current-temperature"><span></h1>
</section>
```

And display it on page load:

```javascript
// interface.js, within the $(document).ready(function() { })

$.get('http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=a3d9eb01d4de82b9b8d0849ef604dbed&units=metric', function(data) {
  $('#current-temperature').text(data.main.temp);
})
```

[Forward to the Challenge Map](../0_challenge_map.md)
