# Solution - Research CRUD

[Back to Challenge](../07_research_crud.md)

## Advanced SQL: C.R.U.D.
*Note: The following assumes a database populated with some data relevant to the domain of Bookmark Manager.*

**C.R.U.D.** sounds like it should be an 80s punk band - but in Computer Science this acronym represents the four basic functions of [persistent storage](http://en.wikipedia.org/wiki/Persistence_(computer_science)), and stands for **Create, Read, Update and Delete.** These terms are pretty much self-explanatory, but I shall cover each of them in the context of SQL in just a moment.

**SQL** (pronounced "squeal") stands for **Structured Query Language.** It is the most common language used to communicate with modern databases, and there are a handful of basic commands that will stand you in extremely good stead during your career as a Developer. Let us look at those as they apply to the principles of C.R.U.D.

#### Read

So we're going to defy the order of the acronym for a moment, and start with Read (cRud). The reason being, that knowing what's currently in a database is usually advantageous before creating, updating or deleting. The SQL command associated with Reading, is called `SELECT`. Let's say we have connected to a database. Let's take a look at the tables that this database consists of, using the postgres command `\dt`:

```
some_database=# \dt

List of relations
Schema |   Name    | Type  |    Owner
--------+-----------+-------+-------------
public | link_tags | table | your_username
public | links     | table | your_username
public | tags      | table | your_username
public | users     | table | your_username
(4 rows)
```

Now it would be really useful to know what kind of data lives in `links`.

```SQL
SELECT * FROM links;
```
This asks the database to select _everything_ (*) from the table `links`.

```
id |     title      |           url
----+----------------+--------------------------
 1 | Code.org       | http://code.org
 2 | Makers Academy | http://makersacademy.com
(2 rows)
```

So we can see here that we have three columns (also called 'fields'): `id`, `title` and `url`, and two rows (also called 'records' or 'tuples') with a value for each field. This shows us our table structure.

#### Create

The SQL command associated with creation is `INSERT`. This command will create new [rows](http://en.wikipedia.org/wiki/Row_%28database%29d) in a table. Let's update our `links` table with some information for [CSS-Tricks](http://css-tricks.com):

```SQL
INSERT INTO "links" (TITLE,URL) VALUES ( 'CSS Tricks', 'http://csstricks.com');
```

There are several things to note here.

* Where the column names (fields) are declared, we omit `ID`. This is because the `ID` value is generated by SQL.
* When passing strings to populate the rows, we use single quotes. SQL typically reserves double quotes for table names.

Now let's have a look at the contents of table again:

```SQL
SELECT * FROM "links";
```
```
id |     title      |           url
----+----------------+--------------------------
 1 | Code.org       | http://code.org
 2 | Makers Academy | http://makersacademy.com
 3 | CSS Tricks     | http://csstricks.com
(3 rows)
```

We have successfully created a new record in `links`, and the database has assigned it a sequential `id`.

#### Update

Sometimes we want to change existing values in our database. The `UPDATE` command is our friend here. Let's say that we made an error by linking to csstricks.com, and wish to amend the url value to the correct address (which is _css-tricks_.com). Looking at our table with a `SELECT` query, we can see that the column we have stored our offending value at is called `url` and it has a unique `id` of '3' associated with it.

```SQL
UPDATE "links" SET URL = 'http://css-tricks.com' WHERE ID = 3;
```
```
UPDATE 1
```
Run another `SELECT` query to see if our changes have taken effect (`UPDATE 1` is a confirmation message).

```SQL
SELECT * FROM "links";
```
```
id |     title      |           url
----+----------------+--------------------------
 1 | Code.org       | http://code.org
 2 | Makers Academy | http://makersacademy.com
 3 | CSS Tricks     | http://css-tricks.com
(3 rows)
```

#### Delete

To remove a row from a table, we use the `DELETE` command.

```SQL
DELETE FROM "links" WHERE ID = 1;
```
```
DELETE 1
```
Now let's inspect `links` again:

```SQL
SELECT * FROM "links";
```
```
id |     title      |           url
----+----------------+--------------------------
 2 | Makers Academy | http://makersacademy.com
 3 | CSS Tricks     | http://css-tricks.com
(2 rows)
```

[next challenge](../08_viewing_links.md)
