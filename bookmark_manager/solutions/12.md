# Solution

[Back to Challenge](../12_configuring_database_cleaner.md)

#Database Cleaner

First you need a test to check whether the database starts of with no links:

```ruby
# spec/creating_links_spec.rb

scenario 'there are no links in the database at the start of the test' do
  expect(Link.count).to eq 0
end
```

We wouldn't usually have a test like this, it's just an illustration of why DatabaseCleaner is essential.

Add the ```database_cleaner``` gem to the ```Gemfile``` and bundle it. Then, require it in ```spec_helper.rb``` and configure RSpec to use it.

```ruby
require 'database_cleaner'
...

RSpec.configure do |config|

  config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end

end
```

This will make sure that the database is cleared after every test run.

[next challenge](../13_configuring_the_rack_env.md)
